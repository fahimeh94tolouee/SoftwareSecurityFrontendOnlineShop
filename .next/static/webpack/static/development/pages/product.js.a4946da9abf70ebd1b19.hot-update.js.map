{"version":3,"file":"static/webpack/static/development/pages/product.js.a4946da9abf70ebd1b19.hot-update.js","sources":["webpack:///./actions/actionTypes.js","webpack:///./actions/index.js","webpack:///./actions/order.js","webpack:///./components/product/topSection.js","webpack:///./pages/product.js"],"sourcesContent":["export const LOGIN_REQUEST = \"LOGIN_REQUEST\";\nexport const LOGIN_SUCCESS = \"LOGIN_SUCCESS\";\nexport const LOGIN_FAILURE = \"LOGIN_FAILURE\";\nexport const REGISTER_REQUEST = \"REGISTER_REQUEST\";\nexport const REGISTER_SUCCESS = \"REGISTER_SUCCESS\";\nexport const REGISTER_FAILURE = \"REGISTER_FAILURE\";\nexport const VERIFY_REQUEST = \"VERIFY_REQUEST\";\nexport const VERIFY_SUCCESS = \"VERIFY_SUCCESS\";\nexport const VERIFY_FAILURE = \"VERIFY_FAILURE\";\n\nexport const SET_USER_DATA = \"SET_USER_DATA\"\nexport const GET_USER_DATA = \"GET_USER_DATA\"\nexport const GET_USER_DATA_SUCCESS = \"GET_USER_DATA_SUCCESS\"\nexport const GET_USER_DATA_FAILURE = \"GET_USER_DATA_FAILURE\"\n\nexport const UPDATE_USER_DATA = \"UPDATE_USER_DATA\"\nexport const UPDATE_USER_DATA_SUCCESS = \"UPDATE_USER_DATA_SUCCESS\"\nexport const UPDATE_USER_DATA_FAILURE = \"UPDATE_USER_DATA_FAILURE\"\n\nexport const CHANGE_USER_PASSWORD = \"CHANGE_USER_PASSWORD\"\nexport const CHANGE_USER_PASSWORD_SUCCESS = \"CHANGE_USER_PASSWORD_SUCCESS\"\nexport const CHANGE_USER_PASSWORD_FAILURE = \"CHANGE_USER_PASSWORD_FAILURE\"\n\n\nexport const GET_PRODUCT_LIST_REQUEST = \"GET_PRODUCT_LIST_REQUEST\";\nexport const GET_PRODUCT_LIST_SUCCESS = \"GET_PRODUCT_LIST_SUCCESS\";\nexport const GET_PRODUCT_LIST_FAILURE = \"GET_PRODUCT_LIST_FAILURE\";\n\nexport const SHOW_PRODUCT_REQUEST = \"SHOW_PRODUCT_REQUEST\";\nexport const SHOW_PRODUCT_SUCCESS = \"SHOW_PRODUCT_SUCCESS\";\nexport const SHOW_PRODUCT_FAILURE = \"SHOW_PRODUCT_FAILURE\";\n\n\nexport const QUESTION_LIST_REQUEST = \"QUESTION_LIST_REQUEST\";\nexport const QUESTION_LIST_SUCCESS = \"QUESTION_LIST_SUCCESS\";\nexport const QUESTION_LIST_FAILURE = \"QUESTION_LIST_FAILURE\";\nexport const QUESTION_STORE_REQUEST = \"QUESTION_STORE_REQUEST\";\nexport const QUESTION_STORE_SUCCESS = \"QUESTION_STORE_SUCCESS\";\nexport const QUESTION_STORE_FAILURE = \"QUESTION_STORE_FAILURE\";\nexport const QUESTION_ON_CHANGE = \"QUESTION_ON_CHANGE\";\nexport const QUESTION_UPDATE_REQUEST = \"QUESTION_UPDATE_REQUEST\";\nexport const QUESTION_UPDATE_SUCCESS = \"QUESTION_UPDATE_SUCCESS\";\nexport const QUESTION_UPDATE_FAILURE = \"QUESTION_UPDATE_FAILURE\";\n\nexport const ADD_TO_CART_REQUEST = \"ADD_TO_CART_REQUEST\";\nexport const ADD_TO_CART_SUCCESS = \"ADD_TO_CART_SUCCESS\";\nexport const ADD_TO_CART_FAILURE = \"ADD_TO_CART_FAILURE\";","import * as AuthAction from \"./auth\";\nimport * as UserAction from \"./user\";\nimport * as ProductAction from \"./product\";\nimport * as QuestionAction from \"./question\";\nimport * as OrderAction from \"./order\";\n\nexport {\n  AuthAction,\n  UserAction,\n  ProductAction,\n  QuestionAction,\n  OrderAction\n}","import Request from \"../utilities/request\";\nimport * as types from \"../actions/actionTypes\";\n\nexport const setOrder = data => ({\n  type: \"SET_ORDER\",\n  payload: data\n});\nexport const getOrder = () => {\n  return dispatch => {\n    Request({\n      url: process.env.apiUrl + \"/profile/orders/\",\n      method: \"get\",\n      needToken: true\n    })\n      .then(response => {\n        dispatch(\n          setOrder({\n            items: response.data.data\n          })\n        );\n      })\n      .catch(error => {});\n  };\n};\nexport const getSingleOrder = id => {\n  return dispatch => {\n    Request({\n      url: process.env.apiUrl + \"/profile/orders/\" + id,\n      method: \"get\",\n      needToken: true\n    })\n      .then(response => {\n        dispatch(\n          setOrder({\n            order: response.data.data\n          })\n        );\n      })\n      .catch(error => {});\n  };\n};\nexport const addOrder = data => {\n  return async dispatch => {\n    let params = {};\n    let cartItems = [];\n    if (localStorage.getItem(\"cart\")) {\n      cartItems = JSON.parse(localStorage.getItem(\"cart\"));\n    }\n    params.variations = cartItems;\n    params = Object.assign(params, data);\n    await Request({\n      url: process.env.apiUrl + \"/orders/\",\n      method: \"post\",\n      data: params,\n      needToken: true\n    })\n      .then(response => {\n        window.location.replace(response.data.data.redirect_url);\n      })\n      .catch(error => {});\n  };\n};\nexport const RejectOrder = (id, data) => {\n  return dispatch => {\n    Request({\n      url: process.env.apiUrl + \"/profile/orders/\" + id + \"/return\",\n      method: \"post\",\n      data: data,\n      needToken: true\n    })\n      .then(response => {\n        console.log(response);\n      })\n      .catch(error => {});\n  };\n};\n\nexport const addToCart = (data) => {\n  return {\n    type: types.ADD_TO_CART_REQUEST,\n    data,\n  };\n};\n\nexport const addToCartSuccess = (data) => {\n  return {\n    type: types.ADD_TO_CART_SUCCESS,\n    data\n  };\n};\n\nexport const addToCartFailure = () => {\n  return {\n    type: types.ADD_TO_CART_FAILURE\n  };\n};\n","import React, {useRef, useState} from \"react\";\nimport {\n  Images,\n  Details,\n  Actions\n} from \"../../styled_components/product/topSection\";\nimport ReactImageMagnify from \"react-image-magnify\";\nimport Rating from \"./topSection/rating\";\nimport OfferRibbon from \"./topSection/offerRibbon\";\nimport Features from \"./topSection/features\";\nimport VariationDetail from \"./topSection/variationDetail\";\nimport Carousel from \"./carousel\";\nimport Router from \"next/router\";\nconst TopSection = props => {\n  // const product = props.product.data;\n  const product = props.product;\n  // const variations = props.product.variations;\n  // const variation = props.product.variations[0];\n  const variation = null;\n  const [carouselStatus, setCarouselStatus] = useState(false);\n  const [initialState, setInitialState] = useState(0);\n  const cartButs = () => {\n    if (variation === undefined) {\n      return (\n        <div className=\"notice\">\n          <span>موجود شد به من اطلاع بده</span>\n        </div>\n      );\n    } else {\n      return (\n        <React.Fragment>\n          <div className=\"wish\">\n            <i className=\"icon-good\"/>\n          </div>\n          <div\n            className=\"add-to-cart\"\n            onClick={() => {\n              props.addToCart(product);\n            }}\n          >\n            <span>Add to Cart</span>\n          </div>\n        </React.Fragment>\n      );\n    }\n  };\n  console.log(props);\n  return (\n    <React.Fragment>\n    <Images containerWidth={props.containerWidth}>\n        {/*<OfferRibbon variation={variation} />*/}\n        <ReactImageMagnify\n          className=\"zoom\"\n          enlargedImageContainerClassName=\"enlarged\"\n          {...{\n            smallImage: {\n              alt: product.title,\n              isFluidWidth: true,\n              src: `${process.env.apiUrl}/${product.image_path}`\n            },\n            largeImage: {\n              src: `${process.env.apiUrl}/${product.image_path}`,\n              width: 1200,\n              height: 1200\n            }\n          }}\n        />\n      </Images>\n      <Details>\n        <div className=\"title\">\n          <div className=\"right\">\n            <h1>{product.title}</h1>\n          </div>\n          <div className=\"left\">\n            <div className=\"ribbon\">\n              <span>{product.category}</span>\n            </div>\n            {/*<div className=\"icon\">*/}\n            {/*  <img src={product.category} alt={product.category.name} />*/}\n            {/*</div>*/}\n          </div>\n        </div>\n        <div className=\"rate\">\n          <div className=\"right\">\n            <Rating\n              rate={4}\n              amount={40}\n            />\n          </div>\n          <div className=\"left\"> Style: {product.type}</div>\n        </div>\n        <div className=\"variations\">\n          <div className=\"right\">\n            {/*<VariationDetail*/}\n            {/*  status={variations.length}*/}\n            {/*  variation={variation}*/}\n            {/*  switchType={product.category.type}*/}\n            {/*  switches={props.product.meta.switches}*/}\n            {/*  variationChange={props.variationChange.bind(this)}*/}\n            {/*/>*/}\n          </div>\n          <div className=\"left\">\n            {/*<Features items={product.product_data} />*/}\n          </div>\n        </div>\n        <div className=\"slogans\">\n          <div className=\"right\">\n            <i className=\"baseicon-shield\" />\n            Special Service: Product Exchange Guarantee for Refunds\n          </div>\n          <div className=\"left\">\n            <a href=\"#\" target=\"_blank\">\n              Sell your product in Maleno\n            </a>\n          </div>\n        </div>\n      </Details>\n      <Actions>\n        <div className=\"images-but\">\n          <div className=\"box\">\n              <img\n                src={`${process.env.apiUrl}/${product.image_path}`}\n                alt={product.title}\n                onClick={() => {\n                  setCarouselStatus(true);\n                }}\n              />\n          </div>\n        </div>\n        <div className=\"buts\">\n          <div className=\"right\">{cartButs()}</div>\n          <div className=\"left\">\n            <ul>\n              <li\n                className=\"compare\"\n              >\n                <i className=\"icon-law\" />\n              </li>\n              <li className=\"notice\">\n                <i className=\"icon-bell\" />\n              </li>\n              <li className=\"share\">\n                <i className=\"icon-social-media\" />\n              </li>\n            </ul>\n          </div>\n        </div>\n      </Actions>\n      {/*{(() => {*/}\n      {/*  if (carouselStatus) {*/}\n      {/*    return (*/}\n      {/*      <Carousel*/}\n      {/*        images={product.images}*/}\n      {/*        initialState={initialState}*/}\n      {/*        slideChange={value => {*/}\n      {/*          setInitialState(value);*/}\n      {/*        }}*/}\n      {/*        close={() => {*/}\n      {/*          setCarouselStatus(false);*/}\n      {/*        }}*/}\n      {/*      />*/}\n      {/*    );*/}\n      {/*  }*/}\n      {/*})()}*/}\n    </React.Fragment>\n  );\n};\nexport default TopSection;\n","import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"next/router\";\nimport {\n  getProduct,\n  getProductVariations,\n  setLoading\n} from \"../actions/product\";\nimport {OrderAction, ProductAction} from \"../actions\";\nimport { getBreadcrumb } from \"../actions/breadcrumb\";\nimport Breadcrumb from \"../components/lib/breadcrumb\";\nimport { TopBox, BreadcrumbBox } from \"../styled_components/product\";\n\nimport TopSection from \"../components/product/topSection\";\nimport Slogans from \"../components/product/slogans\";\nimport Variations from \"../components/product/variations\";\nimport ProductData from \"../containers/productData\";\nimport ProductCarousel from \"../components/homeScreen/productCarousel\";\nimport {CART} from \"../constants/storageKey\";\nimport {CART as CART_URL} from \"../constants/urls\";\n\nclass Product extends Component {\n  constructor() {\n    super();\n    this.TopBoxRef = React.createRef();\n\n  }\n  static async getInitialProps({ store, query }) {\n    // await store.dispatch(getProduct(query.id));\n    await store.dispatch(ProductAction.show(query.id));\n    // await store.dispatch(getBreadcrumb(\"product\", query.id));\n\n    return { id: query.id };\n  }\n  state = {\n    id: this.props && this.props.id\n  };\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    let result = {};\n    if (nextProps.id !== prevState.id) {\n      result.id = nextProps.id;\n      nextProps.setLoading({\n          loading:false,\n      })\n    }\n    return result;\n  }\n  componentDidMount() {\n      this.props.setLoading({\n          loading:false,\n      })\n    this.props.show(this.state.id)\n  }\n\n    variationChange(value) {\n    // this.props.getProductVariations(this.props.id, value);\n  }\n  addToCart(data) {\n    this.props.addToCart(data)\n  }\n  render() {\n    const{product} = this.props;\n    return (\n      <React.Fragment>\n        <TopBox ref={this.TopBoxRef}>\n          <TopSection\n            addToCart={this.addToCart.bind(this)}\n            product={product}\n            variationChange={this.variationChange.bind(this)}\n            containerWidth={this.TopBoxRef && this.TopBoxRef.current && this.TopBoxRef.current.getBoundingClientRect().width}\n          />\n        </TopBox>\n        <Slogans />\n        {/*<Variations items={product.variations} />*/}\n        {/*<ProductCarousel*/}\n        {/*  title=\"جدیدترین محصولات افزوده شده\"*/}\n        {/*  more=\"/product/1\"*/}\n        {/*  fetch_url={*/}\n        {/*    process.env.apiUrl + \"/home_page/lists?type=newest_products\"*/}\n        {/*  }*/}\n        {/*/>*/}\n        <ProductData\n          name={product.title}\n          // enName={product.en_name}\n          // productData={product.product_data}\n          // advantages={product.advantages}\n          // disadvantages={product.disadvantages}\n          // rating={this.props.product.meta.ratings}\n          desc={product.description}\n          // meta_description={product.meta_description}\n          id={this.state.id}\n        />\n        {/*<ProductCarousel*/}\n        {/*  title=\"خریداران این محصول این محصولات را نیز خرید اند\"*/}\n        {/*  more=\"/product/1\"*/}\n        {/*  fetch_url={*/}\n        {/*    process.env.apiUrl + \"/home_page/lists?type=newest_products\"*/}\n        {/*  }*/}\n        {/*/>*/}\n      </React.Fragment>\n    );\n  }\n}\nconst mapStateToProps = store => {\n  return {\n    product: store.Product.product,\n    breadcrumb: store.Breadcrumb\n  };\n};\nconst mapDispatchToProps = dispatch => {\n  return {\n    getProduct: id => {\n      dispatch(getProduct(id));\n    },\n    getProductVariations: (product, variation) => {\n      dispatch(getProductVariations(product, variation));\n    },\n    setLoading: data => {\n      dispatch(setLoading(data));\n    },\n    show: id=>{\n      dispatch(ProductAction.show(id))\n    },\n    addToCart:(data)=>{\n      dispatch(OrderAction.addToCart(data))\n    }\n  };\n};\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Product)\n);\n"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AAEA;AACA;AACA;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;;;;;;;;;;;;AC9CA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACJA;AACA;AAEA;AAAA;AACA;AACA;AAFA;AAAA;AAIA;AACA;AACA;AACA;AACA;AACA;AAHA;AAMA;AAEA;AADA;AAIA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAMA;AAEA;AADA;AAIA;AAEA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AAPA;AAAA;AASA;AACA;AACA;AACA;AAJA;AAOA;AACA;AACA;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAJA;AAOA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AACA;AAFA;AAIA;AAEA;AACA;AACA;AADA;AAGA;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/FA;AACA;AAKA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AAEA;AACA;AAAA;AACA;AANA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AACA;AAOA;AACA;AACA;AACA;AAAA;AAIA;AACA;AAEA;AAAA;AACA;AAAA;AAGA;AACA;AACA;AACA;AAJA;AAUA;AACA;AACA;AAAA;AACA;AAEA;AAAA;AAGA;AACA;AAFA;AAIA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAHA;AANA;AAeA;AAAA;AACA;AAAA;AAGA;AAAA;AACA;AAAA;AAQA;AAAA;AACA;AAAA;AAEA;AACA;AAFA;AAKA;AAAA;AAEA;AAAA;AACA;AAAA;AASA;AAAA;AAIA;AAAA;AACA;AAAA;AACA;AAAA;AAGA;AAAA;AACA;AAAA;AAAA;AAOA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AASA;AAAA;AACA;AAAA;AACA;AAAA;AAGA;AADA;AAGA;AAAA;AAEA;AAAA;AACA;AAAA;AAEA;AAAA;AACA;AAAA;AAwBA;AACA;AAAA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACvKA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAaA;AADA;AACA;AAXA;AAFA;AAIA;AACA;;;AAqBA;AACA;AACA;AADA;AAGA;AACA;;;AAEA;AAEA;;;AACA;AACA;AACA;;;AACA;AAAA;AAEA;AAEA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAiBA;AAEA;AACA;AACA;AACA;AANA;AAOA;AAPA;AASA;AATA;AAoBA;;;;;;;;;;;;AA3EA;;AAEA;AACA;;AAEA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;AAKA;AACA;AACA;AAAA;AACA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;;;;AA1BA;AACA;AAkFA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAfA;AAiBA;AACA;AAAA;;;;A","sourceRoot":""}