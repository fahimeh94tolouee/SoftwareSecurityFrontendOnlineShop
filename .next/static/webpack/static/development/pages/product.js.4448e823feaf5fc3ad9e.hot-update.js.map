{"version":3,"file":"static/webpack/static/development/pages/product.js.4448e823feaf5fc3ad9e.hot-update.js","sources":["webpack:///./pages/product.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport { withRouter } from \"next/router\";\nimport {\n  getProduct,\n  getProductVariations,\n  setLoading\n} from \"../actions/product\";\nimport {ProductAction} from \"../actions\";\nimport { getBreadcrumb } from \"../actions/breadcrumb\";\nimport Breadcrumb from \"../components/lib/breadcrumb\";\nimport { TopBox, BreadcrumbBox } from \"../styled_components/product\";\n\nimport TopSection from \"../components/product/topSection\";\nimport Slogans from \"../components/product/slogans\";\nimport Variations from \"../components/product/variations\";\nimport ProductData from \"../containers/productData\";\nimport ProductCarousel from \"../components/homeScreen/productCarousel\";\n\nclass Product extends Component {\n  static async getInitialProps({ store, query }) {\n    // await store.dispatch(getProduct(query.id));\n    await store.dispatch(ProductAction.show(query.id));\n    // await store.dispatch(getBreadcrumb(\"product\", query.id));\n\n    return { id: query.id };\n  }\n  state = {\n    id: this.props.id\n  };\n\n  static getDerivedStateFromProps(nextProps, prevState) {\n    let result = {};\n    if (nextProps.id !== prevState.id) {\n      result.id = nextProps.id;\n      nextProps.setLoading({\n          loading:false,\n      })\n    }\n    return result;\n  }\n  componentDidMount() {\n      this.props.setLoading({\n          loading:false,\n      })\n  }\n\n    variationChange(value) {\n    // this.props.getProductVariations(this.props.id, value);\n  }\n  addToCart(id, qty) {\n    let cart = [];\n    let pushStatus = true;\n    if (localStorage.getItem(\"cart\")) {\n      cart = JSON.parse(localStorage.getItem(\"cart\"));\n    }\n    cart.filter(item => {\n      if (item.id === id) {\n        pushStatus = false;\n      }\n    });\n    if (pushStatus) {\n      cart.push({ id: id, quantity: qty });\n    }\n    localStorage.setItem(\"cart\", JSON.stringify(cart));\n    this.props.router.push(\"/cart\");\n  }\n  render() {\n    const{product} = this.props;\n    console.log(product);\n    // console.log(this.props);\n    return (\n      <React.Fragment>\n        {/*<BreadcrumbBox>*/}\n        {/*  <div className=\"container\">*/}\n        {/*    <Breadcrumb items={this.props.breadcrumb.items} type=\"product\" />*/}\n        {/*  </div>*/}\n        {/*</BreadcrumbBox>*/}\n        <TopBox>\n          <TopSection\n            addToCart={this.addToCart.bind(this)}\n            product={product}\n            variationChange={this.variationChange.bind(this)}\n          />\n        </TopBox>\n        <Slogans />\n        {/*<Variations items={product.variations} />*/}\n        {/*<ProductCarousel*/}\n        {/*  title=\"جدیدترین محصولات افزوده شده\"*/}\n        {/*  more=\"/product/1\"*/}\n        {/*  fetch_url={*/}\n        {/*    process.env.apiUrl + \"/home_page/lists?type=newest_products\"*/}\n        {/*  }*/}\n        {/*/>*/}\n        <ProductData\n          name={product.title}\n          // enName={product.en_name}\n          // productData={product.product_data}\n          // advantages={product.advantages}\n          // disadvantages={product.disadvantages}\n          // rating={this.props.product.meta.ratings}\n          desc={product.description}\n          // meta_description={product.meta_description}\n          id={this.state.id}\n        />\n        {/*<ProductCarousel*/}\n        {/*  title=\"خریداران این محصول این محصولات را نیز خرید اند\"*/}\n        {/*  more=\"/product/1\"*/}\n        {/*  fetch_url={*/}\n        {/*    process.env.apiUrl + \"/home_page/lists?type=newest_products\"*/}\n        {/*  }*/}\n        {/*/>*/}\n      </React.Fragment>\n    );\n  }\n}\nconst mapStateToProps = store => {\n  return {\n    product: store.Product.product,\n    breadcrumb: store.Breadcrumb\n  };\n};\nconst mapDispatchToProps = dispatch => {\n  return {\n    getProduct: id => {\n      dispatch(getProduct(id));\n    },\n    getProductVariations: (product, variation) => {\n      dispatch(getProductVariations(product, variation));\n    },\n    setLoading: data => {\n      dispatch(setLoading(data));\n    }\n  };\n};\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(Product)\n);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAKA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AAQA;AACA;AADA;AACA;;;;;;AAaA;AACA;AACA;AADA;AAGA;;;AAEA;AAEA;;;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;;;AACA;AAAA;AAEA;AACA;AACA;AASA;AACA;AACA;AAHA;AAgBA;AAEA;AACA;AACA;AACA;AANA;AAOA;AAPA;AASA;AATA;AAoBA;;;;;;;;;;;;AA9FA;;AAEA;AACA;;AAEA;AAAA;AAAA;AACA;;;;;;;;;;;;;;;;;AAKA;AACA;AACA;AAAA;AACA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;;;;AArBA;AACA;AAgGA;AACA;AACA;AACA;AAFA;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AATA;AAWA;AACA;AAAA;;;;A","sourceRoot":""}