{"version":3,"file":"static/webpack/static/development/pages/profile/information.js.114605f1233c53bfb9d2.hot-update.js","sources":["webpack:///./pages/profile/information.js"],"sourcesContent":["import React, { Component } from \"react\";\nimport { connect } from \"react-redux\";\nimport validator from \"validator\";\nimport { TitleBox } from \"../../styled_components/profile\";\nimport { getInformation, updateInformation } from \"../../actions/user\";\nimport { InforamtionBox } from \"../../styled_components/profile/information\";\nimport { Row, Col } from \"styled-bootstrap-grid\";\nimport CheckBox from \"../../components/lib/checkbox\";\nimport Switch from \"react-switch\";\nimport Request from \"../../utilities/request\";\nimport Select from \"react-select\";\nclass Information extends Component {\n  static async getInitialProps({ store, query }) {}\n\n  constructor(props) {\n    super(props);\n    this.state = { data: this.props.userData.data };\n    // if (\n    //   typeof this.props.userData.data !== \"undefined\"\n    // ) {\n    //   this.getLocation(\n    //     \"cities\",\n    //     this.props.userData.data.legal_user.province.value\n    //   );\n    // }\n  }\n  componentDidMount() {\n    this.props.getInformation();\n    // this.getLocation(\"provinces\", 1);\n  }\n  getLocation(type, id) {\n    Request({\n      method: \"get\",\n      url: process.env.apiUrl + \"/admin/locations/\" + id + \"/children\"\n    })\n      .then(response => {\n        this.setState({\n          [type]: response.data.data\n        });\n      })\n      .catch(error => {});\n  }\n  static getDerivedStateFromProps(nextProps, prevState) {\n    let result = {};\n    if (nextProps.userData.data !== prevState.data) {\n      result.data = nextProps.userData.data;\n    }\n    return result;\n  }\n  handelChange(value, type, name) {\n    let data = this.state.data;\n    data[type][name] = value;\n    this.setState({\n      data: data\n    });\n  }\n  handelCheckBox(type, name) {\n    let data = this.state.data;\n    data[type][name] = !data[type][name];\n    this.setState({\n      data: data\n    });\n  }\n  handelSwitch(value) {\n    let data = this.state.data;\n    data[value] = !data[value];\n    this.setState({\n      data: data\n    });\n  }\n  overView() {\n    if (!this.state.data.is_legal_user) {\n      return (\n        <div className=\"over\">\n          <div\n            className=\"legal-slogan\"\n            onClick={() => {\n              let data = this.state.data;\n              data.is_legal_user = true;\n              this.setState({\n                data: data\n              });\n            }}\n          >\n            <i className=\"icon-shipping-and-delivery\" />\n            <span>افزودن اطـلاعات حـقوقی</span>\n          </div>\n        </div>\n      );\n    }\n  }\n  handleLocation(value, type) {\n    if (type === \"province\") {\n      this.getLocation(\"cities\", value.value);\n    }\n    let data = this.state.data;\n    data.legal_user[type] = value;\n    this.setState({\n      data: data\n    });\n  }\n  submit() {\n    this.props.updateInformation(this.state.data);\n  }\n  actionBox(position) {\n    if (position === \"top\" && !this.state.data.is_legal_user) {\n      return (\n        <div className=\"action-box\">\n          <div className=\"submit\" onClick={this.submit.bind(this)}>\n            ثبت اطلاعات کاربری\n          </div>\n          <div className=\"cancel\">انصراف</div>\n        </div>\n      );\n    } else if (position === \"bottom\" && this.state.data.is_legal_user) {\n      return (\n        <div className=\"action-box\">\n          <div className=\"submit\" onClick={this.submit.bind(this)}>\n            ثبت اطلاعات کاربری\n          </div>\n          <div className=\"cancel\">انصراف</div>\n        </div>\n      );\n    }\n  }\n  formView() {\n    let data = this.state.data;\n    if (typeof data !== \"undefined\") {\n      return (\n        <form>\n          <div className=\"form-box\">\n            <Row>\n              <Col col={6}>\n                <div className=\"title\">حساب شخصی</div>\n                <label>First Name</label>\n                <input\n                  type=\"text\"\n                  value={data.first_name}\n                  onChange={e => {\n                    this.handelChange(e.target.value, \"real_user\", \"name\");\n                  }}\n                />\n                <label>Last Name</label>\n                <input\n                  type=\"text\"\n                  value={data.last_name}\n                  onChange={e => {\n                    this.handelChange(e.target.value, \"real_user\", \"family\");\n                  }}\n                />\n                <label>کدملی</label>\n                <input\n                  type=\"text\"\n                  value={data.real_user.national_number}\n                  onChange={e => {\n                    this.handelChange(\n                      e.target.value,\n                      \"real_user\",\n                      \"national_number\"\n                    );\n                  }}\n                />\n                <div\n                  onClick={() => {\n                    this.handelCheckBox(\"real_user\", \"is_foreigner\");\n                  }}\n                >\n                  <CheckBox\n                    title=\"تبعه خارجی فاقد کد ملی هستم\"\n                    status={data.real_user.is_foreigner}\n                  />\n                </div>\n              </Col>\n              <Col col={6}>\n                <div className=\"title\">اطلاعات تماس</div>\n                <label>Phone Number</label>\n                <input\n                  type=\"text\"\n                  value={data.mobile}\n                  onChange={e => {\n                    this.handelChange(e.target.value, \"real_user\", \"mobile\");\n                  }}\n                />\n                <label>شماره کارت</label>\n                <input\n                  type=\"text\"\n                  value={data.real_user.card_number}\n                  onChange={e => {\n                    this.handelChange(\n                      e.target.value,\n                      \"real_user\",\n                      \"card_number\"\n                    );\n                  }}\n                />\n                <label>Email</label>\n                <input\n                  type=\"text\"\n                  value={data.email}\n                  onChange={e => {\n                    this.handelChange(e.target.value, \"real_user\", \"email\");\n                  }}\n                />\n                <div\n                  onClick={() => {\n                    this.handelCheckBox(\"real_user\", \"subscribe_newsletter\");\n                  }}\n                >\n                  <CheckBox\n                    title=\"اشتراک در خبرنامه مال نو\"\n                    status={data.subscribe_newsletter}\n                  />\n                </div>\n              </Col>\n            </Row>\n          </div>\n          {this.actionBox(\"top\")}\n          <div className=\"legal-box\">\n            {this.overView()}\n            <div className=\"form-box\">\n              <Row>\n                <Col col={6}>\n                  <div className=\"title\">حساب حقوقی</div>\n                  <div className=\"switch-box\">\n                    <div className=\"eleman\">\n                      <Switch\n                        height={24}\n                        width={47}\n                        offColor=\"#7d7d7d\"\n                        onColor=\"#3364ad\"\n                        checked={data.need_legal}\n                        uncheckedIcon={false}\n                        checkedIcon={false}\n                        onChange={() => {\n                          this.handelSwitch(\"need_legal\");\n                        }}\n                      />\n                      <span className=\"label\">\n                        مایل به تکمیل اطلاعات حقوقی برای خرید سازمانی هستم\n                      </span>\n                    </div>\n                    <div className=\"slogan\">\n                      با تکمیل اطلاعات حقوقی سازمان مورد نظر خود می‌توانید اقدام\n                      به خرید سازمانی با دریافت فاکتور رسمی و گواهی ارزش افزوده\n                      نمایید.\n                    </div>\n                  </div>\n\n                  <label>نام شرکت</label>\n                  <input\n                    type=\"text\"\n                    value={data.company_name}\n                    onChange={e => {\n                      this.handelChange(\n                        e.target.value,\n                        \"legal_user\",\n                        \"company_name\"\n                      );\n                    }}\n                  />\n                  <label>کد اقتصادی</label>\n                  <input\n                    type=\"text\"\n                    value={data.economic_code}\n                    onChange={e => {\n                      this.handelChange(\n                        e.target.value,\n                        \"legal_user\",\n                        \"economic_code\"\n                      );\n                    }}\n                  />\n                </Col>\n                <Col col={6}>\n                  <label>شناسه ملی</label>\n                  <input\n                    type=\"text\"\n                    value={data.national_number}\n                    onChange={e => {\n                      this.handelChange(\n                        e.target.value,\n                        \"legal_user\",\n                        \"national_number\"\n                      );\n                    }}\n                  />\n                  <label>شماره ثبت</label>\n                  <input\n                    type=\"text\"\n                    value={data.registration_number}\n                    onChange={e => {\n                      this.handelChange(\n                        e.target.value,\n                        \"legal_user\",\n                        \"registration_number\"\n                      );\n                    }}\n                  />\n                  <label>شماره تلفن ثابت</label>\n                  <input\n                    type=\"text\"\n                    value={data.phone}\n                    onChange={e => {\n                      this.handelChange(e.target.value, \"legal_user\", \"phone\");\n                    }}\n                  />\n                  <label>محل دفتر مرکزی</label>\n                  <div className=\"location\">\n                    <Select\n                      className=\"select\"\n                      classNamePrefix=\"select\"\n                      value={data.province}\n                      onChange={value => {\n                        this.handleLocation(value, \"province\");\n                      }}\n                      options={this.state.provinces}\n                      placeholder=\"استان مورد نظر خود را انتخاب کنید\"\n                    />\n                    <Select\n                      className=\"select\"\n                      classNamePrefix=\"select\"\n                      value={data.city}\n                      onChange={value => {\n                        this.handleLocation(value, \"city\");\n                      }}\n                      options={this.state.cities}\n                      placeholder=\"استان مورد نظر خود را انتخاب کنید\"\n                    />\n                  </div>\n                </Col>\n              </Row>\n            </div>\n            {this.actionBox(\"bottom\")}\n          </div>\n        </form>\n      );\n    }\n  }\n  render() {\n    console.log(this.props);\n    return (\n      <React.Fragment>\n        <TitleBox>ویرایش اطـلاعـات شـخصی</TitleBox>\n        <InforamtionBox>{this.formView()}</InforamtionBox>\n      </React.Fragment>\n    );\n  }\n}\nconst mapStateToProps = store => {\n  return {\n    userData: store.User\n  };\n};\nconst mapDispatchToProps = dispatch => {\n  return {\n    getInformation: () => {\n      dispatch(getInformation());\n    },\n    updateInformation: data => {\n      dispatch(updateInformation(data));\n    }\n  };\n};\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(Information);\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;;;;;;;;;;;;;;;;AACA;AACA;;;;;;;;;;;;;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAXA;AAWA;AACA;;;AAAA;AACA;AAEA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AAFA;AAKA;AAGA;AAEA;;;AAQA;AACA;AACA;AACA;AACA;AADA;AAGA;;;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;;;AACA;AACA;AACA;AACA;AACA;AADA;AAGA;;;AACA;AAAA;AACA;AAAA;AACA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AAAA;AACA;AADA;AAGA;AARA;AAUA;AAAA;AAKA;AACA;;;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AADA;AAGA;;;AACA;AACA;AACA;;;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAGA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AAGA;AAAA;AAGA;AACA;;;AACA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAEA;AAAA;AAEA;AAAA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AALA;AASA;AACA;AACA;AACA;AACA;AALA;AASA;AACA;AACA;AACA;AAKA;AATA;AAYA;AACA;AACA;AAHA;AAMA;AACA;AAFA;AAMA;AAAA;AACA;AAAA;AAGA;AACA;AACA;AACA;AACA;AALA;AASA;AACA;AACA;AACA;AAKA;AATA;AAaA;AACA;AACA;AACA;AACA;AALA;AAQA;AACA;AACA;AAHA;AAMA;AACA;AAFA;AASA;AAAA;AAEA;AAAA;AAEA;AAAA;AACA;AAAA;AACA;AAAA;AACA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAVA;AAYA;AAAA;AAIA;AAAA;AASA;AACA;AACA;AACA;AAKA;AATA;AAaA;AACA;AACA;AACA;AAKA;AATA;AAYA;AAAA;AAGA;AACA;AACA;AACA;AAKA;AATA;AAaA;AACA;AACA;AACA;AAKA;AATA;AAaA;AACA;AACA;AACA;AACA;AALA;AAQA;AAAA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARA;AAkBA;AACA;;;AACA;AACA;AACA;AAMA;;;AAhTA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;;;;AArCA;AACA;AAgVA;AACA;AACA;AADA;AAGA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AANA;AAQA;AACA;AAAA;;;;A","sourceRoot":""}