{"version":3,"file":"static/webpack/static/development/pages/_app.js.6ab8a6118984b45d6acc.hot-update.js","sources":["webpack:///./sagas/user.js"],"sourcesContent":["import { call, put, takeLatest } from \"redux-saga/effects\";\nimport * as types from \"../actions/actionTypes\";\nimport { UserAction } from \"../actions\";\nimport * as userApi from \"../api/user\";\nimport { toastr } from \"react-redux-toastr\";\nimport { SetMessage } from \"../utilities/specifics/errorMessages\";\nimport logout from \"../utilities/logout\";\nimport Router from \"next/router\";\nimport {LOGIN} from \"../constants/urls\";\n\nexport function* watcherUser() {\n  yield takeLatest(types.GET_USER_DATA, workerGetInfo);\n  yield takeLatest(types.UPDATE_USER_DATA, workerUpdateInfo);\n  yield takeLatest(types.CHANGE_USER_PASSWORD, workerChangePassword);\n}\n\nfunction getInfo() {\n  return userApi.getInfo();\n}\nfunction* workerGetInfo() {\n  try {\n    const response = yield call(getInfo);\n    yield put(UserAction.getInfoSuccess(response.data.data));\n  } catch (error) {\n    const message = SetMessage(error);\n    yield put(UserAction.getInfoFailure(message));\n  }\n}\n\nfunction updateInfo(data) {\n  return userApi.updateInfo(data);\n}\nfunction* workerUpdateInfo(action) {\n  try {\n    const response = yield call(updateInfo, action.data);\n    yield put(UserAction.updateInfoSuccess(response.data.data));\n    // yield put(InitAction.getSuccess({ userData: response.data.data }));\n    response.data.message.forEach(message => {\n      toastr.success(\" \", message.toString());\n    });\n  } catch (error) {\n    SetMessage(error, true);\n    yield put(UserAction.updateInfoFailure());\n  }\n}\n\nfunction fetchChangePassword(data) {\n  return userApi.changePassword(data);\n}\nfunction* workerChangePassword(action) {\n  try {\n    const response = yield call(fetchChangePassword, action.data);\n    yield put(UserAction.changePasswordSuccess());\n    response.data.message.forEach(message => {\n      toastr.success(\" \", message.toString());\n    });\n    logout();\n    //TODO FIX\n    // yield call(Router.replace, LOGIN);\n  } catch (error) {\n    SetMessage(error, true);\n    yield put(UserAction.changePasswordFailure());\n  }\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAUA;;;AASA;;;AAaA;;;AAiBA;AACA;AAlDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AAFA;AAAA;AAEA;AACA;AAHA;AAAA;AAGA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAKA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAHA;AAEA;AAFA;AAGA;AACA;AAJA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AAKA;AALA;AAMA;AACA;AAPA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AASA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAHA;AAEA;AAFA;AAGA;AACA;AAJA;AAIA;AACA;AACA;AACA;AAPA;AAAA;AACA;AADA;AAAA;AAAA;AASA;AATA;AAUA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAaA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AAHA;AAEA;AAFA;AAGA;AACA;AAJA;AAIA;AACA;AACA;AACA;AAEA;AACA;AAVA;AAAA;AACA;AADA;AAAA;AAAA;AAWA;AAXA;AAYA;AACA;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;A","sourceRoot":""}